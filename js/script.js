// ===== PET NAMES DATABASE =====
const petNames = {
  dog: {
    male: [
      {
        name: "Milo",
        origin: "Germanic",
        meaning: "Soldier or merciful",
        tags: ["popular", "strong"],
        trending: true
      },
      {
        name: "Max",
        origin: "Latin",
        meaning: "Greatest",
        tags: ["classic", "strong"]
      },
      {
        name: "Charlie",
        origin: "English",
        meaning: "Free man",
        tags: ["friendly", "popular"],
        trending: true
      },
      {
        name: "Cooper",
        origin: "English",
        meaning: "Barrel maker",
        tags: ["unique", "strong"]
      },
      {
        name: "Teddy",
        origin: "English",
        meaning: "Divine gift",
        tags: ["cute", "friendly"],
        trending: true
      },
      {
        name: "Rocky",
        origin: "English",
        meaning: "Rest",
        tags: ["strong", "brave"]
      },
      {
        name: "Bear",
        origin: "English",
        meaning: "Strong as a bear",
        tags: ["strong", "unique"]
      },
      {
        name: "Leo",
        origin: "Latin",
        meaning: "Lion",
        tags: ["brave", "regal"]
      },
      {
        name: "Duke",
        origin: "Latin",
        meaning: "Leader",
        tags: ["noble", "strong"]
      },
      {
        name: "Zeus",
        origin: "Greek",
        meaning: "Sky god",
        tags: ["powerful", "mythological"]
      },
      {
        name: "Atlas",
        origin: "Greek",
        meaning: "To bear",
        tags: ["strong", "unique"]
      },
      {
        name: "Finn",
        origin: "Irish",
        meaning: "Fair",
        tags: ["friendly", "adventurous"]
      },
      {
        name: "Oscar",
        origin: "Irish",
        meaning: "Friend of deer",
        tags: ["classic", "gentle"]
      },
      {
        name: "Archie",
        origin: "German",
        meaning: "Truly brave",
        tags: ["cute", "brave"]
      },
      {
        name: "Ollie",
        origin: "English",
        meaning: "Olive tree",
        tags: ["playful", "friendly"]
      }
    ],
    female: [
      {
        name: "Luna",
        origin: "Latin",
        meaning: "Moon",
        tags: ["mystical", "popular"],
        trending: true
      },
      {
        name: "Bella",
        origin: "Italian",
        meaning: "Beautiful",
        tags: ["elegant", "popular"],
        trending: true
      },
      {
        name: "Daisy",
        origin: "English",
        meaning: "Day's eye flower",
        tags: ["cute", "nature"],
        trending: true
      },
      {
        name: "Lucy",
        origin: "Latin",
        meaning: "Light",
        tags: ["classic", "bright"]
      },
      {
        name: "Willow",
        origin: "English",
        meaning: "Willow tree",
        tags: ["nature", "graceful"]
      },
      {
        name: "Stella",
        origin: "Latin",
        meaning: "Star",
        tags: ["celestial", "elegant"]
      },
      {
        name: "Ruby",
        origin: "Latin",
        meaning: "Red gemstone",
        tags: ["precious", "vibrant"]
      },
      {
        name: "Sadie",
        origin: "Hebrew",
        meaning: "Princess",
        tags: ["sweet", "regal"]
      },
      {
        name: "Chloe",
        origin: "Greek",
        meaning: "Blooming",
        tags: ["fresh", "elegant"]
      },
      {
        name: "Sophie",
        origin: "Greek",
        meaning: "Wisdom",
        tags: ["smart", "classic"]
      },
      {
        name: "Zoe",
        origin: "Greek",
        meaning: "Life",
        tags: ["energetic", "bright"]
      },
      {
        name: "Lily",
        origin: "English",
        meaning: "Lily flower",
        tags: ["pure", "delicate"]
      },
      {
        name: "Rosie",
        origin: "English",
        meaning: "Rose",
        tags: ["sweet", "classic"]
      },
      {
        name: "Penny",
        origin: "English",
        meaning: "Weaver",
        tags: ["cute", "friendly"]
      },
      {
        name: "Nala",
        origin: "African",
        meaning: "Successful",
        tags: ["strong", "exotic"]
      }
    ]
  },
  cat: {
    male: [
      {
        name: "Milo",
        origin: "Germanic",
        meaning: "Soldier or merciful",
        tags: ["popular", "playful"],
        trending: true
      },
      {
        name: "Oliver",
        origin: "Latin",
        meaning: "Olive tree",
        tags: ["classic", "gentle"]
      },
      {
        name: "Leo",
        origin: "Latin",
        meaning: "Lion",
        tags: ["brave", "regal"],
        trending: true
      },
      {
        name: "Simba",
        origin: "Swahili",
        meaning: "Lion",
        tags: ["brave", "disney"]
      },
      {
        name: "Felix",
        origin: "Latin",
        meaning: "Happy, fortunate",
        tags: ["classic", "lucky"]
      },
      {
        name: "Oscar",
        origin: "Irish",
        meaning: "Friend of deer",
        tags: ["sophisticated", "classic"]
      },
      {
        name: "Jasper",
        origin: "Persian",
        meaning: "Treasurer",
        tags: ["unique", "elegant"]
      },
      {
        name: "Shadow",
        origin: "English",
        meaning: "Shade from sun",
        tags: ["mysterious", "cool"]
      },
      {
        name: "Smokey",
        origin: "English",
        meaning: "Smoke-colored",
        tags: ["classic", "gray"]
      },
      {
        name: "Oreo",
        origin: "Modern",
        meaning: "Black and white cookie",
        tags: ["cute", "food"]
      },
      {
        name: "Loki",
        origin: "Norse",
        meaning: "Trickster god",
        tags: ["mischievous", "mythological"]
      },
      {
        name: "Cosmo",
        origin: "Greek",
        meaning: "Universe",
        tags: ["cosmic", "unique"]
      },
      {
        name: "Mochi",
        origin: "Japanese",
        meaning: "Rice cake",
        tags: ["cute", "food"]
      },
      {
        name: "Binx",
        origin: "Modern",
        meaning: "From Hocus Pocus",
        tags: ["magical", "pop culture"]
      },
      {
        name: "Salem",
        origin: "Hebrew",
        meaning: "Peace",
        tags: ["mystical", "witchy"]
      }
    ],
    female: [
      {
        name: "Luna",
        origin: "Latin",
        meaning: "Moon",
        tags: ["mystical", "popular"],
        trending: true
      },
      {
        name: "Cleo",
        origin: "Greek",
        meaning: "Glory",
        tags: ["regal", "short"]
      },
      {
        name: "Nala",
        origin: "African",
        meaning: "Successful",
        tags: ["strong", "disney"],
        trending: true
      },
      {
        name: "Willow",
        origin: "English",
        meaning: "Willow tree",
        tags: ["nature", "graceful"]
      },
      {
        name: "Chloe",
        origin: "Greek",
        meaning: "Blooming",
        tags: ["elegant", "popular"]
      },
      {
        name: "Mittens",
        origin: "English",
        meaning: "Hand warmers",
        tags: ["cute", "classic"]
      },
      {
        name: "Pepper",
        origin: "English",
        meaning: "Spicy seed",
        tags: ["spunky", "food"]
      },
      {
        name: "Olive",
        origin: "Latin",
        meaning: "Olive tree",
        tags: ["nature", "unique"]
      },
      {
        name: "Pearl",
        origin: "Latin",
        meaning: "Precious gem",
        tags: ["elegant", "precious"]
      },
      {
        name: "Zelda",
        origin: "German",
        meaning: "Gray fighting maid",
        tags: ["strong", "gaming"]
      },
      {
        name: "Nova",
        origin: "Latin",
        meaning: "New star",
        tags: ["cosmic", "bright"]
      },
      {
        name: "Ivy",
        origin: "English",
        meaning: "Climbing plant",
        tags: ["nature", "elegant"]
      },
      {
        name: "Misty",
        origin: "English",
        meaning: "Covered with mist",
        tags: ["mysterious", "soft"]
      },
      {
        name: "Sasha",
        origin: "Russian",
        meaning: "Defender",
        tags: ["strong", "international"]
      },
      {
        name: "Pixie",
        origin: "Celtic",
        meaning: "Fairy",
        tags: ["magical", "tiny"]
      }
    ]
  },
  rabbit: {
    male: [
      {
        name: "Thumper",
        origin: "English",
        meaning: "One who thumps",
        tags: ["disney", "classic"]
      },
      {
        name: "Oreo",
        origin: "Modern",
        meaning: "Black and white cookie",
        tags: ["cute", "food"]
      },
      {
        name: "Biscuit",
        origin: "English",
        meaning: "Small bread",
        tags: ["food", "cute"]
      },
      {
        name: "Pepper",
        origin: "English",
        meaning: "Spicy seed",
        tags: ["spunky", "food"]
      },
      {
        name: "Cocoa",
        origin: "Spanish",
        meaning: "Chocolate bean",
        tags: ["sweet", "brown"]
      }
    ],
    female: [
      {
        name: "Daisy",
        origin: "English",
        meaning: "Day's eye flower",
        tags: ["flower", "cute"]
      },
      {
        name: "Clover",
        origin: "English",
        meaning: "Lucky plant",
        tags: ["nature", "lucky"]
      },
      {
        name: "Honey",
        origin: "English",
        meaning: "Sweet nectar",
        tags: ["sweet", "golden"]
      },
      {
        name: "Willow",
        origin: "English",
        meaning: "Willow tree",
        tags: ["nature", "graceful"]
      },
      {
        name: "Cotton",
        origin: "English",
        meaning: "Soft fiber",
        tags: ["soft", "white"]
      }
    ]
  },
  bird: {
    male: [
      {
        name: "Rio",
        origin: "Spanish",
        meaning: "River",
        tags: ["tropical", "colorful"]
      },
      {
        name: "Sky",
        origin: "English",
        meaning: "Heavens above",
        tags: ["flying", "blue"]
      },
      {
        name: "Phoenix",
        origin: "Greek",
        meaning: "Mythical bird",
        tags: ["mythological", "powerful"]
      },
      {
        name: "Sunny",
        origin: "English",
        meaning: "Full of sunshine",
        tags: ["bright", "cheerful"]
      },
      {
        name: "Jazz",
        origin: "American",
        meaning: "Music style",
        tags: ["musical", "cool"]
      }
    ],
    female: [
      {
        name: "Pearl",
        origin: "Latin",
        meaning: "Precious gem",
        tags: ["elegant", "white"]
      },
      {
        name: "Ruby",
        origin: "Latin",
        meaning: "Red gemstone",
        tags: ["precious", "red"]
      },
      {
        name: "Angel",
        origin: "Greek",
        meaning: "Messenger",
        tags: ["heavenly", "sweet"]
      },
      {
        name: "Melody",
        origin: "Greek",
        meaning: "Song",
        tags: ["musical", "sweet"]
      },
      {
        name: "Skye",
        origin: "Scottish",
        meaning: "Island of clouds",
        tags: ["nature", "flying"]
      }
    ]
  },
  hamster: {
    male: [
      {
        name: "Peanut",
        origin: "English",
        meaning: "Small nut",
        tags: ["food", "tiny"]
      },
      {
        name: "Gizmo",
        origin: "American",
        meaning: "Gadget",
        tags: ["cute", "techy"]
      },
      {
        name: "Nibbles",
        origin: "English",
        meaning: "Small bites",
        tags: ["eating", "cute"]
      },
      {
        name: "Whiskers",
        origin: "English",
        meaning: "Facial hair",
        tags: ["classic", "cute"]
      },
      {
        name: "Chip",
        origin: "English",
        meaning: "Small piece",
        tags: ["tiny", "food"]
      }
    ],
    female: [
      {
        name: "Hazel",
        origin: "English",
        meaning: "Hazel tree",
        tags: ["nature", "brown"]
      },
      {
        name: "Cookie",
        origin: "English",
        meaning: "Sweet biscuit",
        tags: ["food", "sweet"]
      },
      {
        name: "Mochi",
        origin: "Japanese",
        meaning: "Rice cake",
        tags: ["cute", "food"]
      },
      {
        name: "Poppy",
        origin: "Latin",
        meaning: "Poppy flower",
        tags: ["flower", "tiny"]
      },
      {
        name: "Sugar",
        origin: "English",
        meaning: "Sweet substance",
        tags: ["sweet", "white"]
      }
    ]
  }
};

// ===== PERSONALITY FILTERS =====
const personalityFilters = {
  playful: ["playful", "energetic", "fun", "mischievous"],
  calm: ["gentle", "peaceful", "quiet", "serene"],
  brave: ["brave", "strong", "bold", "fearless"],
  cute: ["cute", "adorable", "sweet", "tiny"],
  smart: ["intelligent", "clever", "wise", "bright"]
};

// ===== MAIN FUNCTIONS =====
function generateNames() {
  // Get filter values
  const petType = document.getElementById("petType").value;
  const gender = document.getElementById("gender").value;
  const personality = document.getElementById("personality").value;
  const origin = document.getElementById("origin").value;

  // Show loading
  const loading = document.getElementById("loading");
  const results = document.getElementById("results");
  const resultsGrid = document.getElementById("resultsGrid");

  loading.classList.add("active");
  results.classList.remove("active");

  // Simulate API call
  setTimeout(() => {
    loading.classList.remove("active");

    // Get filtered names
    let filteredNames = getFilteredNames(petType, gender, personality, origin);

    // Display results
    displayResults(filteredNames);

    results.classList.add("active");
  }, 1500);
}

function getFilteredNames(petType, gender, personality, origin) {
  let names = [];

  // Get names based on pet type and gender
  if (petNames[petType]) {
    if (gender === "any") {
      names = [
        ...(petNames[petType].male || []),
        ...(petNames[petType].female || [])
      ];
    } else {
      names = petNames[petType][gender] || [];
    }
  }

  // Filter by personality
  if (personality !== "any" && personalityFilters[personality]) {
    names = names.filter((name) =>
      name.tags.some((tag) => personalityFilters[personality].includes(tag))
    );
  }

  // Filter by origin
  if (origin !== "any") {
    names = names.filter(
      (name) => name.origin.toLowerCase() === origin.toLowerCase()
    );
  }

  // If no names match filters, return random selection
  if (names.length === 0) {
    names = getRandomNames(petType, gender, 6);
  }

  // Shuffle and limit results
  return shuffleArray(names).slice(0, 12);
}

function getRandomNames(petType, gender, count) {
  let allNames = [];

  if (petNames[petType]) {
    if (gender === "any") {
      allNames = [
        ...(petNames[petType].male || []),
        ...(petNames[petType].female || [])
      ];
    } else {
      allNames = petNames[petType][gender] || [];
    }
  }

  return shuffleArray(allNames).slice(0, count);
}

function displayResults(names) {
  const resultsGrid = document.getElementById("resultsGrid");
  resultsGrid.innerHTML = "";

  names.forEach((name, index) => {
    const nameCard = createNameCard(name, index);
    resultsGrid.appendChild(nameCard);
  });
}

function createNameCard(nameData, index) {
  const card = document.createElement("div");
  card.className = "name-card";
  card.style.animationDelay = `${index * 0.1}s`;

  const trendingBadge = nameData.trending ? "🔥" : "";

  card.innerHTML = `
        <h3>
            ${nameData.name} ${trendingBadge}
            <button class="favorite-btn" onclick="toggleFavorite(this)">♡</button>
        </h3>
        <p class="name-origin">${nameData.origin} origin</p>
        <p class="name-meaning">${nameData.meaning}</p>
        <div class="name-tags">
            ${nameData.tags
              .map((tag) => `<span class="tag">${tag}</span>`)
              .join("")}
        </div>
    `;

  return card;
}

function toggleFavorite(button) {
  button.classList.toggle("active");
  button.textContent = button.classList.contains("active") ? "♥" : "♡";

  // Here you could save favorites to localStorage
  const nameCard = button.closest(".name-card");
  const petName = nameCard.querySelector("h3").textContent.trim();

  if (button.classList.contains("active")) {
    saveFavorite(petName);
  } else {
    removeFavorite(petName);
  }
}

function saveFavorite(name) {
  let favorites = JSON.parse(localStorage.getItem("favoritePetNames") || "[]");
  if (!favorites.includes(name)) {
    favorites.push(name);
    localStorage.setItem("favoritePetNames", JSON.stringify(favorites));
  }
}

function removeFavorite(name) {
  let favorites = JSON.parse(localStorage.getItem("favoritePetNames") || "[]");
  favorites = favorites.filter((fav) => fav !== name);
  localStorage.setItem("favoritePetNames", JSON.stringify(favorites));
}

// ===== UTILITY FUNCTIONS =====
function shuffleArray(array) {
  const newArray = [...array];
  for (let i = newArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
  }
  return newArray;
}

// ===== SMOOTH SCROLL =====
document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
  anchor.addEventListener("click", function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute("href"));
    if (target) {
      target.scrollIntoView({
        behavior: "smooth",
        block: "start"
      });
    }
  });
});

// ===== ANIMATED COUNTER =====
function animateCounter(element, target, duration = 2000) {
  let start = 0;
  const increment = target / (duration / 16);

  const timer = setInterval(() => {
    start += increment;
    if (start >= target) {
      element.textContent = target.toLocaleString();
      clearInterval(timer);
    } else {
      element.textContent = Math.floor(start).toLocaleString();
    }
  }, 16);
}

// ===== INTERSECTION OBSERVER FOR ANIMATIONS =====
const observerOptions = {
  threshold: 0.1,
  rootMargin: "0px 0px -100px 0px"
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      entry.target.classList.add("animate");

      // Animate counters when stats section is visible
      if (entry.target.classList.contains("stats-section")) {
        const counters = entry.target.querySelectorAll(".stat-item h3");
        counters.forEach((counter) => {
          const target = parseInt(counter.textContent.replace(/[^0-9]/g, ""));
          animateCounter(counter, target);
        });
      }
    }
  });
}, observerOptions);

// Observe all sections
document.querySelectorAll("section").forEach((section) => {
  observer.observe(section);
});

// ===== MOBILE MENU TOGGLE =====
function createMobileMenu() {
  const nav = document.querySelector("nav");
  const menuButton = document.createElement("button");
  menuButton.className = "mobile-menu-toggle";
  menuButton.innerHTML = "☰";
  menuButton.style.display = "none";

  // Add mobile menu styles
  const style = document.createElement("style");
  style.textContent = `
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block !important;
            }
            
            .nav-links {
                position: fixed;
                top: 60px;
                right: -100%;
                width: 250px;
                height: 100vh;
                background: var(--gradient);
                flex-direction: column;
                padding: 2rem;
                transition: right 0.3s ease;
            }
            
            .nav-links.active {
                right: 0;
            }
        }
    `;
  document.head.appendChild(style);

  menuButton.addEventListener("click", () => {
    document.querySelector(".nav-links").classList.toggle("active");
  });

  nav.appendChild(menuButton);
}

// Initialize mobile menu
createMobileMenu();

// ===== PAGE LOAD ANIMATIONS =====
window.addEventListener("load", () => {
  // Add stagger animation to hero pet gallery
  const petImages = document.querySelectorAll(
    ".pet-gallery .pet-image-placeholder"
  );
  petImages.forEach((img, index) => {
    img.style.animation = `fadeInUp 0.5s ease-out ${index * 0.1}s both`;
  });
});

// ===== CONSOLE EASTER EGG =====
console.log(
  "%c🐾 Welcome to PetNameGenius! 🐾",
  "font-size: 20px; color: #667eea; font-weight: bold;"
);
console.log(
  "%cMade with ❤️ for pet lovers everywhere",
  "font-size: 14px; color: #764ba2;"
);

// ===== BLOG ARTICLES DATABASE =====
const blogArticles = [

  {
  id: 3,
  title: "Top 10 Cat Toys to Keep Your Feline Happy and Active (2025 Guide)",
  category: "products",
  excerpt:
    "Looking for the best toys to stimulate your cat? Discover top-rated interactive toys every cat parent should know about.",
  content: `
    <h3>Why Cat Toys Matter</h3>
    <p>Cats need both mental and physical stimulation to stay healthy. The right toy can reduce anxiety, encourage exercise, and prevent destructive behavior.</p>

    <img src="images/blog/cattoys.jpg" alt="Best cat toys in 2025" style="max-width:100%; border-radius:12px; margin: 1rem 0;" />

    <h3>1. Interactive Laser Toy</h3>
    <p>This automatic laser keeps your cat chasing light beams while you relax. Great for solo play.<br />
    👉 <a href="https://amzn.to/4o3keZ6" target="_blank">Check on Amazon</a></p>

    <h3>2. Catnip-Filled Mice</h3>
    <p>Soft, chewable, and infused with organic catnip—perfect for encouraging natural hunting instincts.<br />
    👉 <a href="https://amzn.to/4f3hzKL" target="_blank">Buy now on Amazon</a></p>

    <h3>3. Feather Wand Toy</h3>
    <p>A classic. Engage with your cat using this durable, fun wand. Great bonding activity!<br />
    👉 <a href="https://amzn.to/4lXgPJo" target="_blank">Shop on Amazon</a></p>

    <h3>4. Puzzle Feeders</h3>
    <p>Make mealtime a game. Stimulates brain activity and slows down overeating.<br />
    👉 <a href="https://amzn.to/4lwmdDo" target="_blank">See on Amazon</a></p>

    <h3>5. Motion-Activated Ball</h3>
    <p>This smart ball moves unpredictably when touched. Keeps cats active and engaged.<br />
    👉 <a href="https://amzn.to/3Uaoatn" target="_blank">View on Amazon</a></p>

    <h3>6. Cat Tunnel with Crinkle</h3>
    <p>Perfect for hiding, playing, and zoomies. Cats love the crinkling sound.<br />
    👉 <a href="https://amzn.to/4m7MfwM" target="_blank">Buy on Amazon</a></p>

    <h3>7. Hanging Door Toy</h3>
    <p>Attaches to any door and swings naturally. Keeps indoor cats entertained when alone.<br />
    👉 <a href="https://amzn.to/4f5jZIW" target="_blank">Check on Amazon</a></p>

    <h3>8. Cat Teething Rings</h3>
    <p>For kittens especially, these toys help with teething and oral health.<br />
    👉 <a href="https://amzn.to/3GAhvWd" target="_blank">Get it here</a></p>

    <h3>9. Robotic Mouse</h3>
    <p>Battery-powered, realistic movement—great for cats that get bored easily.<br />
    👉 <a href="https://amzn.to/4lD1ZI6" target="_blank">View product</a></p>

    <h3>10. Treat Dispensers</h3>
    <p>A toy and reward system in one. Keeps them motivated and active.<br />
    👉 <a href="https://amzn.to/45byPdf" target="_blank">Find on Amazon</a></p>

    <h3>Final Thoughts</h3>
    <p>The best toy is one your cat actually uses — experiment with a few types to discover what clicks. Enriching your cat’s environment helps prevent boredom, improves health, and deepens your bond.</p>
  `,
  readTime: "5 min read",
  date: "2025-07-13",
  author: "Dr. Emily Chen",
  image: "images/blog/top-cat-toys.jpg",
  tags: ["products", "cat toys", "reviews", "amazon"],
  seo: {
    metaTitle: "Top 10 Cat Toys of 2025 | Best Interactive Toys for Cats",
    metaDescription:
      "Discover the best cat toys of 2025 to keep your feline happy, active, and healthy. Interactive, catnip, puzzle feeders & more — with Amazon links.",
    keywords: [
      "best cat toys 2025",
      "interactive toys for cats",
      "amazon cat toys",
      "cat enrichment products"
    ]
  }
}

  {
    id: 1,
    title: "10 Essential Tips for First-Time Dog Owners",
    category: "care",
    excerpt:
      "Everything you need to know before bringing your new furry friend home. From feeding schedules to training basics.",
    content: `
            <h3>Getting Ready for Your New Companion</h3>
            <p>Bringing home your first dog is an exciting milestone! Here are the essential tips every new dog owner should know:</p>
            
            <h3>1. Prepare Your Home</h3>
            <p>Dog-proof your space by removing hazardous items and creating a safe environment for your new pet.</p>
            
            <h3>2. Establish a Routine</h3>
            <p>Dogs thrive on consistency. Set regular feeding times, walk schedules, and bedtime routines.</p>
            
            <h3>3. Start Training Early</h3>
            <p>Begin with basic commands like "sit," "stay," and "come." Positive reinforcement works best!</p>
            
            <h3>4. Socialization is Key</h3>
            <p>Expose your dog to different people, animals, and environments in a controlled manner.</p>
            
            <h3>5. Regular Vet Checkups</h3>
            <p>Schedule regular veterinary visits to keep your dog healthy and up-to-date on vaccinations.</p>
        `,
    readTime: "5 min read",
    date: "2025-01-15",
    author: "Dr. Sarah Johnson",
    image: "images/blog/senior-pet-health.jpg",
    tags: ["beginner", "training", "care"],
    seo: {
      metaTitle: "10 Essential Tips for First-Time Dog Owners | PetNameGenius",
      metaDescription:
        "Complete guide for new dog owners. Learn essential care tips, training basics, and how to prepare your home for your new furry friend.",
      keywords: [
        "first time dog owner",
        "dog care tips",
        "new puppy guide",
        "dog training basics"
      ]
    }
  },
  {
    id: 2,
    title: "Understanding Cat Behavior: What Your Feline is Trying to Tell You",
    category: "care",
    excerpt:
      "Decode your cat's mysterious behaviors and strengthen your bond through better communication.",
    content: `
            <h3>The Secret Language of Cats</h3>
            <p>Cats communicate in subtle ways that many owners miss. Understanding these signals can improve your relationship significantly.</p>
            
            <h3>Tail Positions and Their Meanings</h3>
            <p>A cat's tail is like a mood ring - it tells you exactly how they're feeling:</p>
            <ul>
                <li><strong>Straight up:</strong> Happy and confident</li>
                <li><strong>Puffed up:</strong> Scared or aggressive</li>
                <li><strong>Low or tucked:</strong> Anxious or submissive</li>
                <li><strong>Twitching:</strong> Excited or irritated</li>
            </ul>
            
            <h3>Purring Isn't Always Happiness</h3>
            <p>While cats often purr when content, they also purr when stressed, sick, or seeking comfort.</p>
            
            <h3>The Slow Blink</h3>
            <p>When your cat slowly closes and opens their eyes while looking at you, it's a "cat kiss" - a sign of trust and affection.</p>
        `,
    readTime: "4 min read",
    date: "2025-01-12",
    author: "Dr. Emily Chen",
    image: "images/blog/cat-behavior.jpg",
    tags: ["behavior", "communication", "cats"],
    seo: {
      metaTitle:
        "Understanding Cat Behavior: Decode Your Feline's Signals | PetNameGenius",
      metaDescription:
        "Learn to understand your cat's behavior, body language, and communication signals. Strengthen your bond with expert insights.",
      keywords: [
        "cat behavior",
        "feline communication",
        "cat body language",
        "understanding cats"
      ]
    }
  },
  {
    id: 3,
    title: "The Complete Guide to Puppy Training",
    category: "training",
    excerpt:
      "Master the fundamentals of puppy training with our step-by-step guide to raising a well-behaved dog.",
    content: `
            <h3>Starting Your Puppy's Training Journey</h3>
            <p>Training your puppy is one of the most important investments you can make in your relationship together.</p>
            
            <h3>House Training Basics</h3>
            <p>Consistency is key when house training your puppy:</p>
            <ul>
                <li>Take them out every 2-3 hours</li>
                <li>Always go out after meals and naps</li>
                <li>Praise immediately when they go outside</li>
                <li>Never punish accidents - clean thoroughly and move on</li>
            </ul>
            
            <h3>Basic Commands Every Puppy Should Learn</h3>
            <p>Start with these essential commands:</p>
            <ul>
                <li><strong>Sit:</strong> The foundation of all training</li>
                <li><strong>Stay:</strong> Teaches impulse control</li>
                <li><strong>Come:</strong> Essential for safety</li>
                <li><strong>Down:</strong> Promotes calmness</li>
                <li><strong>Leave it:</strong> Prevents dangerous situations</li>
            </ul>
            
            <h3>Positive Reinforcement Techniques</h3>
            <p>Reward good behavior immediately with treats, praise, or play. This creates positive associations with training.</p>
        `,
    readTime: "7 min read",
    date: "2025-01-10",
    author: "Mark Rodriguez",
    image: "images/blog/puppy-care.jpg",
    tags: ["training", "puppy", "obedience"],
    seo: {
      metaTitle:
        "Complete Puppy Training Guide: House Training & Basic Commands | PetNameGenius",
      metaDescription:
        "Master puppy training with our comprehensive guide. Learn house training, basic commands, and positive reinforcement techniques.",
      keywords: [
        "puppy training",
        "house training puppy",
        "basic dog commands",
        "positive reinforcement training"
      ]
    }
  },
  {
    id: 4,
    title: "Nutritional Needs: Feeding Your Pet for Optimal Health",
    category: "nutrition",
    excerpt:
      "Learn about proper nutrition for different pets and life stages to keep your companion healthy and happy.",
    content: `
            <h3>The Foundation of Pet Health</h3>
            <p>Proper nutrition is the cornerstone of your pet's health, affecting everything from their energy levels to their lifespan.</p>
            
            <h3>Understanding Pet Food Labels</h3>
            <p>Learn to read and understand what's really in your pet's food:</p>
            <ul>
                <li>Look for named protein sources (chicken, beef, salmon)</li>
                <li>Avoid foods with excessive fillers</li>
                <li>Check for AAFCO certification</li>
                <li>Consider your pet's specific life stage</li>
            </ul>
            
            <h3>Life Stage Nutrition</h3>
            <p><strong>Puppies/Kittens:</strong> Need higher protein and calories for growth</p>
            <p><strong>Adult pets:</strong> Require balanced maintenance nutrition</p>
            <p><strong>Senior pets:</strong> May need specialized diets for age-related issues</p>
            
            <h3>Common Nutritional Mistakes</h3>
            <p>Avoid these common feeding errors that can harm your pet's health:</p>
            <ul>
                <li>Overfeeding treats (should be less than 10% of daily calories)</li>
                <li>Feeding human food that's toxic to pets</li>
                <li>Not adjusting portions as pets age</li>
                <li>Ignoring food allergies or sensitivities</li>
            </ul>
        `,
    readTime: "6 min read",
    date: "2025-01-08",
    author: "Dr. Lisa Park",
    image: "🥘",
    tags: ["nutrition", "health", "feeding"],
    seo: {
      metaTitle:
        "Pet Nutrition Guide: Feeding Your Pet for Optimal Health | PetNameGenius",
      metaDescription:
        "Complete guide to pet nutrition. Learn about proper feeding, reading food labels, and nutritional needs for different life stages.",
      keywords: [
        "pet nutrition",
        "dog food guide",
        "cat nutrition",
        "pet feeding guide",
        "healthy pet diet"
      ]
    }
  },
  {
    id: 5,
    title: "Common Health Issues in Senior Pets",
    category: "health",
    excerpt:
      "Recognize the signs of aging in your pet and learn how to provide the best care for their golden years.",
    content: `
            <h3>Caring for Your Senior Companion</h3>
            <p>As pets age, they face unique health challenges. Early recognition and proper care can help maintain their quality of life.</p>
            
            <h3>Signs Your Pet is Aging</h3>
            <ul>
                <li>Decreased activity and mobility</li>
                <li>Changes in appetite or weight</li>
                <li>Increased sleeping</li>
                <li>Difficulty with stairs or jumping</li>
                <li>Changes in behavior or confusion</li>
            </ul>
            
            <h3>Common Senior Pet Health Issues</h3>
            <p><strong>Arthritis:</strong> Joint pain and stiffness affecting mobility</p>
            <p><strong>Dental Disease:</strong> Tooth decay and gum disease</p>
            <p><strong>Kidney Disease:</strong> Decreased kidney function</p>
            <p><strong>Heart Disease:</strong> Various cardiac conditions</p>
            <p><strong>Cognitive Dysfunction:</strong> Similar to dementia in humans</p>
            
            <h3>Supporting Your Senior Pet</h3>
            <ul>
                <li>Regular veterinary checkups (every 6 months)</li>
                <li>Appropriate exercise for their abilities</li>
                <li>Comfortable sleeping areas</li>
                <li>Senior-specific nutrition</li>
                <li>Mental stimulation and enrichment</li>
            </ul>
        `,
    readTime: "5 min read",
    date: "2025-01-05",
    author: "Dr. Michael Thompson",
    image: "🏥",
    tags: ["health", "senior pets", "veterinary"],
    seo: {
      metaTitle: "Senior Pet Health: Common Issues & Care Tips | PetNameGenius",
      metaDescription:
        "Learn about common health issues in senior pets and how to provide the best care for aging dogs and cats.",
      keywords: [
        "senior pet health",
        "aging dog care",
        "elderly cat health",
        "senior pet care tips"
      ]
    }
  }
];

// ===== BLOG FUNCTIONALITY =====
let currentCategory = "all";
let displayedArticles = 3;
const articlesPerLoad = 3;

function initializeBlog() {
  renderBlogArticles();
  setupCategoryFilters();
  setupModal();
}

function renderBlogArticles() {
  const blogGrid = document.getElementById("blogGrid");
  const loadMoreBtn = document.getElementById("loadMoreBtn");

  if (!blogGrid) return;

  // Filter articles by category
  let filteredArticles =
    currentCategory === "all"
      ? blogArticles
      : blogArticles.filter((article) => article.category === currentCategory);

  // Get articles to display
  const articlesToShow = filteredArticles.slice(0, displayedArticles);

  // Clear grid
  blogGrid.innerHTML = "";

  // Render articles
  articlesToShow.forEach((article, index) => {
    const articleCard = createBlogCard(article, index);
    blogGrid.appendChild(articleCard);
  });

  // Show/hide load more button
  if (loadMoreBtn) {
    loadMoreBtn.style.display =
      filteredArticles.length > displayedArticles ? "block" : "none";
  }
}

function createBlogCard(article, index) {
  const card = document.createElement("div");
  card.className = "blog-card";
  card.style.animationDelay = `${index * 0.1}s`;
  card.onclick = () => openArticleModal(article);

  card.innerHTML = `
        <div class="blog-card-image">
            ${
              article.image.startsWith("images/")
                ? `<img src="${article.image}" alt="${
                    article.imageAlt || article.title
                  }" loading="lazy">`
                : article.image
            }
        </div>
        <div class="blog-card-content">
            <div class="blog-meta">
                <span class="blog-category">${article.category}</span>
                <span class="blog-date">${formatDate(article.date)}</span>
            </div>
            <h3 class="blog-title">${article.title}</h3>
            <p class="blog-excerpt">${article.excerpt}</p>
            <div class="blog-read-time">
                📖 ${article.readTime}
            </div>
        </div>
    `;

  return card;
}

function setupCategoryFilters() {
  const categoryBtns = document.querySelectorAll(".category-btn");

  categoryBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      // Remove active class from all buttons
      categoryBtns.forEach((b) => b.classList.remove("active"));

      // Add active class to clicked button
      btn.classList.add("active");

      // Update current category
      currentCategory = btn.dataset.category;
      displayedArticles = articlesPerLoad;

      // Re-render articles
      renderBlogArticles();
    });
  });
}

function setupModal() {
  const modal = document.getElementById("articleModal");
  const closeBtn = document.querySelector(".close-modal");
  const loadMoreBtn = document.getElementById("loadMoreBtn");

  // Close modal events
  if (closeBtn) {
    closeBtn.onclick = closeArticleModal;
  }

  if (modal) {
    modal.onclick = (e) => {
      if (e.target === modal) {
        closeArticleModal();
      }
    };
  }

  // Load more button
  if (loadMoreBtn) {
    loadMoreBtn.addEventListener("click", () => {
      displayedArticles += articlesPerLoad;
      renderBlogArticles();
    });
  }

  // ESC key to close modal
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      closeArticleModal();
    }
  });
}

// ===== SOLUTION SEO : PAGES DÉDIÉES + MODALS =====

// 1. Fonction corrigée pour générer le HTML de l'article
function generateArticleHTML(article) {
  return `
        <div class="article-header">
            <h1 class="article-title">${article.title}</h1>
            <div class="article-meta">
                <span class="blog-category">${article.category}</span>
                <span class="blog-date">${formatDate(article.date)}</span>
                <span class="blog-author">By ${article.author}</span>
                <span class="blog-read-time">📖 ${article.readTime}</span>
            </div>
        </div>
        <div class="article-content">
            ${article.content}
        </div>
    `;
}

// 2. Fonction openArticleModal corrigée
function openArticleModal(article) {
  // Créer une URL unique pour l'article
  const articleUrl = `#article/${article.id}/${slugify(article.title)}`;

  // Mettre à jour l'URL sans recharger la page
  window.history.pushState(
    { articleId: article.id },
    article.title,
    articleUrl
  );

  // Ouvrir le modal normalement
  const modal = document.getElementById("articleModal");
  const modalBody = document.getElementById("modalBody");

  if (!modal || !modalBody) {
    console.error("Modal elements not found!");
    return;
  }

  // Générer le contenu HTML de l'article
  modalBody.innerHTML = generateArticleHTML(article);
  modal.style.display = "block";
  document.body.style.overflow = "hidden";

  // Mettre à jour le SEO
  updateSEOForArticle(article);

  // Ajouter les données structurées JSON-LD
  addStructuredData(article);
}

// 3. Fonction pour créer un slug SEO-friendly
function slugify(text) {
  return text
    .toLowerCase()
    .replace(/[^\w ]+/g, "")
    .replace(/ +/g, "-");
}

// 4. Ajouter les données structurées pour le SEO
function addStructuredData(article) {
  // Supprimer l'ancien script s'il existe
  const existingScript = document.getElementById("article-structured-data");
  if (existingScript) {
    existingScript.remove();
  }

  // Créer les données structurées JSON-LD
  const structuredData = {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    headline: article.title,
    description: article.excerpt,
    image: article.image.startsWith("images/")
      ? `${window.location.origin}/${article.image}`
      : null,
    author: {
      "@type": "Person",
      name: article.author
    },
    publisher: {
      "@type": "Organization",
      name: "PetNameGenius",
      logo: {
        "@type": "ImageObject",
        url: `${window.location.origin}/images/logo.png`
      }
    },
    datePublished: article.date,
    dateModified: article.date,
    mainEntityOfPage: {
      "@type": "WebPage",
      "@id": `${window.location.origin}${window.location.pathname}#article/${article.id}`
    },
    keywords: article.seo.keywords.join(", "),
    articleSection: article.category,
    wordCount: article.content.replace(/<[^>]*>/g, "").split(" ").length
  };

  // Ajouter le script au head
  const script = document.createElement("script");
  script.id = "article-structured-data";
  script.type = "application/ld+json";
  script.textContent = JSON.stringify(structuredData);
  document.head.appendChild(script);
}

// 5. Fonction closeArticleModal corrigée (UNE SEULE VERSION)
function closeArticleModal() {
  const modal = document.getElementById("articleModal");
  if (modal) {
    modal.style.display = "none";
    document.body.style.overflow = "auto";

    // Retourner à l'URL principale
    window.history.pushState({}, "PetNameGenius", window.location.pathname);

    // Reset page title
    document.title = "PetNameGenius - Find the Perfect Name for Your Pet";

    // Supprimer les données structurées
    const structuredDataScript = document.getElementById(
      "article-structured-data"
    );
    if (structuredDataScript) {
      structuredDataScript.remove();
    }

    // Reset meta tags
    resetMetaTags();
  }
}

// 6. Fonction updateSEOForArticle corrigée (UNE SEULE VERSION)
function updateSEOForArticle(article) {
  // Title
  document.title = article.seo.metaTitle;

  // Meta description et keywords
  updateMetaTag("description", article.seo.metaDescription);
  updateMetaTag("keywords", article.seo.keywords.join(", "));

  // Open Graph pour Facebook
  updateMetaTag("og:title", article.title, "property");
  updateMetaTag("og:description", article.excerpt, "property");
  updateMetaTag("og:type", "article", "property");
  updateMetaTag("og:url", window.location.href, "property");

  if (article.image.startsWith("images/")) {
    updateMetaTag(
      "og:image",
      `${window.location.origin}/${article.image}`,
      "property"
    );
  }

  // Twitter Cards
  updateMetaTag("twitter:card", "summary_large_image", "name");
  updateMetaTag("twitter:title", article.title, "name");
  updateMetaTag("twitter:description", article.excerpt, "name");
}

// 7. Fonction helper pour les meta tags
function updateMetaTag(name, content, attribute = "name") {
  let meta = document.querySelector(`meta[${attribute}="${name}"]`);
  if (!meta) {
    meta = document.createElement("meta");
    meta.setAttribute(attribute, name);
    document.head.appendChild(meta);
  }
  meta.content = content;
}

// 8. Fonction pour reset les meta tags
function resetMetaTags() {
  // Reset meta description
  const metaDesc = document.querySelector('meta[name="description"]');
  if (metaDesc) {
    metaDesc.content =
      "Find the perfect name for your pet with PetNameGenius. Discover unique, creative, and meaningful names for dogs, cats, and more!";
  }

  // Supprimer les meta tags Open Graph
  const ogTags = document.querySelectorAll('meta[property^="og:"]');
  ogTags.forEach((tag) => tag.remove());

  // Supprimer les Twitter Cards
  const twitterTags = document.querySelectorAll('meta[name^="twitter:"]');
  twitterTags.forEach((tag) => tag.remove());
}

// 9. Gérer la navigation avec les URLs
window.addEventListener("popstate", function (event) {
  if (event.state && event.state.articleId) {
    const article = blogArticles.find((a) => a.id === event.state.articleId);
    if (article) {
      openArticleModal(article);
    }
  } else {
    closeArticleModal();
  }
});

// 10. Initialiser les URLs au chargement de la page
function initializeArticleRouting() {
  const hash = window.location.hash;
  console.log("Current hash:", hash); // Debug

  if (hash.startsWith("#article/")) {
    const articleId = parseInt(hash.split("/")[1]);
    console.log("Looking for article ID:", articleId); // Debug

    const article = blogArticles.find((a) => a.id === articleId);
    if (article) {
      console.log("Found article:", article.title); // Debug
      // Petit délai pour s'assurer que le DOM est prêt
      setTimeout(() => {
        openArticleModal(article);
      }, 100);
    } else {
      console.log("Article not found for ID:", articleId); // Debug
    }
  }
}

// 11. Fonction formatDate (garder celle-ci)
function formatDate(dateString) {
  const options = { year: "numeric", month: "long", day: "numeric" };
  return new Date(dateString).toLocaleDateString("en-US", options);
}

// 12. Initialisation corrigée (UNE SEULE VERSION)
document.addEventListener("DOMContentLoaded", () => {
  console.log("DOM loaded, initializing blog..."); // Debug

  if (document.getElementById("blogGrid")) {
    initializeBlog();
    // Petit délai pour s'assurer que tout est initialisé
    setTimeout(() => {
      initializeArticleRouting();
    }, 200);
  }
});
